<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#0c0f14" />
    <title>Stoch RSI Signals (1m)</title>
    <meta name="description" content="Bot de sinais Stoch RSI (1m) para ADA, XRP, ETH, BTC." />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📈</text></svg>">
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* 🔧 Overrides minimalistas para layout dark clean */
      :root {
        --bg-main: #0c0f14;
        --card-dark: #1a1f27;
        --accent-green: #3aff7a;
        --accent-red: #ff4d4d;
      }
      body.theme-dark { background: var(--bg-main); }
      .grid.cards { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
      .card { border: none; background: var(--card-dark); }
      .price, .metrics, .metrics-inline, .stats-row strong, #summary {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      }
      .section-title { color: #9aa3af; }
      .time-bar {
        position: fixed; bottom: 0; left: 0; right: 0;
        height: 40px; display: flex; align-items: center; justify-content: center;
        background: rgba(26,31,39,0.85);
        color: #e6e6e6;
        backdrop-filter: saturate(150%) blur(6px);
        border-top: 1px solid rgba(255,255,255,0.06);
        z-index: 9999;
        text-shadow: 0 0 10px rgba(58,255,122,0.15);
      }
      #timeBarText { letter-spacing: 0.2px;     font-size: 30px;} 
      main { padding-bottom: 56px; } /* 🔧 espaço para a barra fixa não sobrepor conteúdo */
    </style>
    <script src="app.js" defer></script>
  </head>
  <body class="theme-dark">
    <div id="app">
      <header id="appHeader" class="app-header">
        <div class="header-left">
          <h1 class="app-title">Stoch RSI Signals (1m)</h1>
        </div>
        <div class="header-right">
          <span id="connStatus" class="status-badge">Desconectando…</span>
          <div class="top-actions">
            <button id="btnReconnect" class="btn btn-reconnect" type="button" title="Reconectar">🔄 Reconectar</button>
            <button id="btnReset" class="btn btn-reset" type="button" title="Reset diário">🧹 Reset diário</button>
          </div>
      </div>
    </header>
      <div id="modeStatusBar" class="mode-bar mode-auto">
        ⚙️ <strong>Modo Automático</strong> — cada ativo alterna entre reversão e rompimento dinamicamente.
      </div>

      <main id="content">
        <section id="panelTop" class="section" aria-label="Painel superior">
          <div id="clock" class="clock" aria-live="polite">--:--:--</div>
          <div id="summary" class="summary">
            📊 Total: <span id="sum-total">0</span> | Wins: <span id="sum-wins">0</span> | Losses: <span id="sum-losses">0</span> | Winrate: <span id="sum-winrate">0%</span>
          </div>
          <div id="balanceBox" class="balance-box">
            💰 <strong id="saldoValor">Saldo: —</strong> USDT
          </div>
          <div id="configBox" class="config-box">
            <label>💵 Entrada: <input id="valorEntradaInput" type="number" step="0.01" value="1.00"></label>
            <label>📈 Payout (%): <input id="payoutInput" type="number" step="0.01" value="0.89"></label>
            <label>🔈 Voz <input id="voiceToggle" type="checkbox" /></label>
            <button id="btnSalvarConfig">Salvar</button>
          </div>
          <div id="systemToggles" class="system-toggles">
            <label><input id="toggleVoice" type="checkbox"> 🔈 Voz (TTS)</label>
            <label><input id="toggleSounds" type="checkbox"> 🔊 Sons</label>
            <!-- 🔧 removido toggle de abstenção -->
          </div>
          <div id="ttsControls" class="tts-box">
            <label>🎤 Voz TTS</label>
            <select id="ttsVoiceSelect"></select>
            <button id="testVoiceBtn" type="button" class="btn">Testar voz</button>
            <div class="tts-sliders">
              <label>Velocidade: <span id="rateVal">1.0</span></label>
              <input id="rateSlider" type="range" min="0.6" max="1.4" step="0.05" value="1.0" />
              <label>Tom: <span id="pitchVal">1.0</span></label>
              <input id="pitchSlider" type="range" min="0.7" max="1.3" step="0.05" value="1.0" />
              <label>Volume: <span id="volVal">1.0</span></label>
              <input id="volSlider" type="range" min="0.5" max="1.0" step="0.05" value="1.0" />
            </div>
          </div>
        </section>
        <section id="ticker" class="section" aria-label="Ticker em tempo real">
          <h2 class="section-title">Ticker</h2>
          <div class="grid cards">
            <article class="card ticker-card" data-symbol="ADAUSDT">
              <div class="card-row">
                <img src="adausdt.png" alt="ADA" class="symbol-icon">
                <span class="symbol">ADAUSDT</span>
                <span class="arrow" id="arrow-ADAUSDT">→</span>
              </div>
<div class="filter-status" id="status-flags-ADAUSDT">⚪ neutro</div>
              <div class="metrics" id="metrics-ADAUSDT">RSI: — | K: — | D: — | ATR: —</div>
              <div class="trends">
                <div>LTA: <span id="lta-ADAUSDT">—</span> ↑</div>
                <div>LTB: <span id="ltb-ADAUSDT">—</span> ↓</div>
              </div>
              <div id="trend-ADAUSDT" class="trend-status">—</div>
              <div id="regime-ADAUSDT" class="regime-status">—</div>
              <div class="price" id="price-ADAUSDT">—</div>
            </article>
            <article class="card ticker-card" data-symbol="XRPUSDT">
              <div class="card-row">
                <img src="XRPUSDT.png" alt="XRP" class="symbol-icon">
                <span class="symbol">XRPUSDT</span>
                <span class="arrow" id="arrow-XRPUSDT">→</span>
              </div>
<div class="filter-status" id="status-flags-XRPUSDT">⚪ neutro</div>
              <div class="metrics" id="metrics-XRPUSDT">RSI: — | K: — | D: — | ATR: —</div>
              <div class="trends">
                <div>LTA: <span id="lta-XRPUSDT">—</span> ↑</div>
                <div>LTB: <span id="ltb-XRPUSDT">—</span> ↓</div>
              </div>
              <div id="trend-XRPUSDT" class="trend-status">—</div>
              <div id="regime-XRPUSDT" class="regime-status">—</div>
              <div class="price" id="price-XRPUSDT">—</div>
            </article>
            <article class="card ticker-card" data-symbol="ETHUSDT">
              <div class="card-row">
                <img src="ETHUSDT.png" alt="ETH" class="symbol-icon">
                <span class="symbol">ETHUSDT</span>
                <span class="arrow" id="arrow-ETHUSDT">→</span>
              </div>
<div class="filter-status" id="status-flags-ETHUSDT">⚪ neutro</div>
              <div class="metrics" id="metrics-ETHUSDT">RSI: — | K: — | D: — | ATR: —</div>
              <div class="trends">
                <div>LTA: <span id="lta-ETHUSDT">—</span> ↑</div>
                <div>LTB: <span id="ltb-ETHUSDT">—</span> ↓</div>
              </div>
              <div id="trend-ETHUSDT" class="trend-status">—</div>
              <div id="regime-ETHUSDT" class="regime-status">—</div>
              <div class="price" id="price-ETHUSDT">—</div>
            </article>
            <article class="card ticker-card" data-symbol="BTCUSDT">
              <div class="card-row">
                <img src="BTCUSDT.png" alt="BTC" class="symbol-icon">
                <span class="symbol">BTCUSDT</span>
                <span class="arrow" id="arrow-BTCUSDT">→</span>
              </div>
<div class="filter-status" id="status-flags-BTCUSDT">⚪ neutro</div>
              <div class="metrics" id="metrics-BTCUSDT">RSI: — | K: — | D: — | ATR: —</div>
              <div class="trends">
                <div>LTA: <span id="lta-BTCUSDT">—</span> ↑</div>
                <div>LTB: <span id="ltb-BTCUSDT">—</span> ↓</div>
              </div>
              <div id="trend-BTCUSDT" class="trend-status">—</div>
              <div id="regime-BTCUSDT" class="regime-status">—</div>
              <div class="price" id="price-BTCUSDT">—</div>
            </article>
          </div>
        </section>

        <section id="signals" class="section" aria-label="Painel de Sinais">
          <h2 class="section-title">Sinais</h2>
          <ul id="signalsFeed" class="feed" aria-live="polite" aria-atomic="false"></ul>
        </section>

        <section id="results" class="section" aria-label="Resultados">
          <h2 class="section-title">Resultados</h2>
          <ul id="resultsFeed" class="feed" aria-live="polite" aria-atomic="false"></ul>
        </section>

        <section id="stats" class="section" aria-label="Estatísticas por símbolo">
          <h2 class="section-title">Estatísticas</h2>
          <div class="grid cards">
            <article class="card stat-card" data-symbol="ADAUSDT">
              <div class="card-row"><span class="symbol">ADAUSDT</span></div>
              <div class="stats-row">
                <span class="metric">Total: <strong id="stat-total-ADAUSDT">0</strong></span>
                <span class="metric">Wins: <strong id="stat-wins-ADAUSDT">0</strong></span>
                <span class="metric">Winrate: <strong id="stat-winrate-ADAUSDT">0%</strong></span>
              </div>
            </article>
            <article class="card stat-card" data-symbol="XRPUSDT">
              <div class="card-row"><span class="symbol">XRPUSDT</span></div>
              <div class="stats-row">
                <span class="metric">Total: <strong id="stat-total-XRPUSDT">0</strong></span>
                <span class="metric">Wins: <strong id="stat-wins-XRPUSDT">0</strong></span>
                <span class="metric">Winrate: <strong id="stat-winrate-XRPUSDT">0%</strong></span>
              </div>
            </article>
            <article class="card stat-card" data-symbol="ETHUSDT">
              <div class="card-row"><span class="symbol">ETHUSDT</span></div>
              <div class="stats-row">
                <span class="metric">Total: <strong id="stat-total-ETHUSDT">0</strong></span>
                <span class="metric">Wins: <strong id="stat-wins-ETHUSDT">0</strong></span>
                <span class="metric">Winrate: <strong id="stat-winrate-ETHUSDT">0%</strong></span>
              </div>
            </article>
            <article class="card stat-card" data-symbol="BTCUSDT">
              <div class="card-row"><span class="symbol">BTCUSDT</span></div>
              <div class="stats-row">
                <span class="metric">Total: <strong id="stat-total-BTCUSDT">0</strong></span>
                <span class="metric">Wins: <strong id="stat-wins-BTCUSDT">0</strong></span>
                <span class="metric">Winrate: <strong id="stat-winrate-BTCUSDT">0%</strong></span>
              </div>
            </article>
          </div>
        </section>
      </main>

      <footer class="app-footer">
        <small>Mercado 1m / Binance / uso próprio</small>
      </footer>
      <div id="timeBar" class="time-bar" role="contentinfo" aria-live="polite">
        <span id="timeBarText">🕒 --:--:-- </span>
      </div>
    </div>
  </body>
</html>